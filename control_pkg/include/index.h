#ifndef INDEX_H
#define INDEX_H

// 常数
constexpr double pi = 3.1415926535;
constexpr double g = 9.815;

// 控制系统
constexpr double CONTROL_RATE = 250;
constexpr double PLAN_RATE = 10;
constexpr double TIME_STEP = 1.0 / CONTROL_RATE;
constexpr double nl_index = 1;
// 限幅参数
constexpr double nono = 1;
constexpr double hip_protect = 1;
constexpr double wheel_protect = 1;
constexpr double hip_limit = 8;
constexpr double foot_limit = 5;
constexpr double prone_speed_limit = 6;

// 时间参数 time除以TIME_STEP可得count
constexpr double init_time = 3;
constexpr double jump_time = 0.3;

// 质量参数
constexpr double m_wheel = 0.3871;
constexpr double m_body = 8.2584;
constexpr double m_l = 1.854;

// 结构参数
constexpr double L1 = 0.141;           // 大腿;
constexpr double L2 = 0.2485;          // 小腿;
constexpr double L3 = 0.2485;          // 小腿;
constexpr double L4 = 0.141;           // 大腿;
constexpr double L5 = 0.120;           // 髋关节电机转轴之间的距离;
constexpr double L6 = 0;               // 足端;
constexpr double radius = 0.152 / 2;   // 半径;
constexpr double half_wheel_d = 0.4716/2; // 驱动轮轮距/2
constexpr double wheel_d = 0.5674;

// 其他参数
constexpr double off_ground_F = 20;  // 判断脱离地面的支持力阈值
constexpr double jump_length = 0.07; // 跳跃时腿长的增量
constexpr double prone_L0_exp = 0.1;
/////俯视图/////
// 146      145//   phi4
//      前     //
// 142 (轮) 141//
//      后     //
// 144      143//   phi1
////////////////
// 设备
#define phi_144 lleg->phi1
#define phi_146 lleg->phi4
#define dphi_144 lleg->dphi1
#define dphi_146 lleg->dphi4
#define phi_143 rleg->phi1
#define phi_145 rleg->phi4
#define dphi_143 rleg->dphi1
#define dphi_145 rleg->dphi4
// 1500, 0, 2800
// 1000,2,2000
// double l0_pid_index[3] = {199.6, 27.45, -98.57};        // 600 2 800
double l0_pid_index[3] = {17.3909, 0.73157, 45.2711};        // 600 2 800
// double l0_pid_index[3] = {800, 2, 1000};        // 600 2 800
// double theta_pid_index[3] = {4.5, 0.0001, 40}; // 3.5 0 35
double theta_pid_index[3] = {3.5, 0, 35}; // 3.5 0 35
double turn_pid_index[3] = {0.04, 0, 3.6};     // 0.04 0 3.6
double roll_pid_index[3] = {2, 0, 0};// 2 0 0

// double l0_pid_index[3] = {17.3909 * 0.3, 0.73157 * 0.3, 45.2711 * 0.3};        // 600 2 800
// double l0_pid_index[3] = {0, 0, 0};        // 600 2 800
// double theta_pid_index[3] = {0, 0, 0}; // 3.5 0 35
// double theta_pid_index[3] = {0, 0, 0}; // 3.5 0 35
// double turn_pid_index[3] = {0, 0, 0};     // 0.04 0 3.6
// double roll_pid_index[3] = {0, 0, 0};


double lqr_index[12][8] =
    {
        // {17.0648, 21.7671, -43.9466, -2.2676},
        // {390.936, -381.0747, 118.1754, 5.1945},
        // {13.444, -11.5278, -2.6294, -0.25435},
        // {16.1034, -21.6239, 10.0932, 0.89053},
        // {13.0357, -4.023, -3.1592, -0.76791},
        // {72.9683, -51.8741, 3.2642, 5.4681},
        // {19.823, -8.9119, -3.0308, -1.1367},
        // {73.7976, -51.7478, 1.9069, 6.6409},
        // {-9.7942, 14.4002, -11.5262, 5.8204},
        // {21.5438, -67.901, 50.7546, -2.2222},
        // {-2.9057, 2.9176, -1.6523, 0.99536},
        // {-2.1754, -6.0758, 7.1075, -0.71933},
        // // Q=[0.01 0.1 5 2 5 0.01 ]
        // // R=[1 0.1]
        // // T=0.004
        // // RadiusOfWheel=0.075

        // old
        //  {7.5696, 25.4792, -44.7344, -2.6009},
        //  {360.0345, -357.8524, 117.645, 4.2121},
        //  {11.1576, -10.0704, -3.4152, -0.28789},
        //  {16.9318, -21.7653, 9.9313, 0.83598},
        //  {24.2554, -13.7121, -0.46299, -1.8634},
        //  {110.0561, -80.7346, 8.8302, 6.2159},
        //  {29.2184, -18.6081, 0.35259, -2.1474},
        //  {92.4896, -67.0435, 6.0558, 6.2803},
        //  {-29.9469, 34.0301, -19.0356, 7.8786},
        //  {-0.043815, -52.3916, 49.3807, -1.0401},
        //  {-4.9831, 4.7488, -2.1299, 1.1892},
        //  {-10.4256, 1.7057, 4.694, -0.49114},
        //  // Q=[0.1 0.1 10 2 5 0.01 ]
        //  // R=[1 0.1]
        //  // T=0.004
        //  // RadiusOfWheel=0.075

        // new
        // {38.6026, -0.60491, -38.9041, -1.7833},
        // {325.8431, -354.0639, 125.5775, 5.759},
        // {4.006, -6.3933, -3.4018, -0.058591},
        // {15.7337, -23.0541, 12.1403, 0.6966},
        // {7.502, 3.7692, -7.8417, -0.43208},
        // {127.7172, -98.3601, 12.9007, 7.2747},
        // {7.9546, 1.4053, -7.1646, -0.72935},
        // {115.3858, -88.1584, 11.0595, 7.1442},
        // {29.3362, -16.8799, -4.1167, 6.5327},
        // {-60.8014, -22.5111, 53.8815, -3.9823},
        // {6.7648, -4.6626, 0.20399, 1.1588},
        // {-25.7738, 8.3632, 6.6351, -1.0279},
        // Q=[0.5 0.1 10 2 5 0.01 ]
        // R=[1 0.1]
        // T=0.004
        // RadiusOfWheel=0.076

//第一版，容易倒下
//         {-115.905,128.3303,-63.4363,-2.4473},
// {74.712,-62.3852,16.7785,2.5706},
// {-15.6718,11.368,-6.2418,-0.10624},
// {5.8904,-3.9947,-0.54062,0.23674},
// {-6.5094,4.2583,-0.59073,-2.0716},
// {-13.3908,16.6689,-7.4608,0.53637},
// {-7.4272,3.4622,-0.13675,-2.1991},
// {-14.1677,17.3452,-7.7179,0.31787},
// {-52.6507,75.8826,-40.3024,8.3847},
// {77.4244,-75.5767,26.654,7.5981},
// {-6.0932,11.139,-6.6428,1.6243},
// {13.1674,-13.3543,4.9202,1.4188},
// //Q=[0.5 0 5 0 0.5 0 ]
// //R=[1 1]
// //T=0.004
// //RadiusOfWheel=0.076

//更好一点，不容易侧翻
// {-94.7128,110.8027,-59.2193,-2.3288},
// {122.1694,-107.546,29.6803,3.2412},
// {-12.321,8.8149,-5.7815,-0.17634},
// {8.655,-6.6672,0.33118,0.40314},
// {-10.3687,9.3453,-2.9526,-1.7662},
// {-0.63775,7.8752,-6.8788,1.3286},
// {-9.0707,6.6338,-1.8936,-2.0164},
// {-3.2884,10.2823,-7.6037,1.1309},
// {-24.9736,46.4748,-29.9546,8.5015},
// {88.7899,-95.8291,38.1594,5.4897},
// {-1.2551,5.8255,-4.7094,1.6405},
// {14.0535,-16.1856,6.8927,0.99147},
//Q=[1 0.1 5 0 0.5 0 ]
//R=[1 0.5]
//T=0.004
//RadiusOfWheel=0.076

//不容易倒，就是位移会飘
// {234481.5983,-347959.7583,209625.1167,-65627.2394,11246.3487,-953.4385,-6.2789,-3.4708},
// {-192134.5867,282928.6744,-167890.6764,50751.7507,-7859.6345,419.0446,45.1812,0.65213},
// {127853.659,-183586.996,105183.5305,-30335.8265,4489.2586,-282.9109,-4.6433,-0.031768},
// {-38038.1127,42775.94,-13855.527,-1353.5736,1851.0617,-445.2414,43.3345,-0.49045},
// {9901.6734,-5013.3345,-5300.4809,5557.9603,-2035.1911,364.0746,-32.2264,0.048417},
// {-18200.8404,19163.0172,-4447.728,-2183.4025,1474.8027,-344.1176,36.5884,-1.2383},
// {26406.4429,-24210.864,1703.225,5503.1373,-2613.9025,511.7561,-46.6562,0.058695},
// {-21674.3011,18818.2477,612.6096,-6126.5848,2840.069,-588.9576,58.0734,-1.9498},
// {-52264.3844,40353.0898,7962.4029,-17757.2731,7291.5707,-1335.5803,98.06,3.5966},
// {-5152.848,44171.8731,-58949.8278,34168.8088,-10391.8649,1692.6416,-124.2808,11.5887},
// {-22753.4369,25364.2443,-7971.2202,-973.7107,1135.7259,-259.7861,22.0661,0.5511},
// {8537.7355,-4620.5877,-4366.8478,4858.1307,-1847.2513,339.3975,-27.7138,2.3286},
//Q=[0.5 4 5 0 5 0 ]
//R=[3 1]
//T=0.004
//RadiusOfWheel=0.076

// {255480.7207,-378737.1664,227806.8848,-71139.2897,12143.1406,-1026.231,-4.6438,-3.5741},
// {-203551.9841,299858.9952,-178035.4271,53871.9445,-8367.1423,455.7431,45.3311,0.54688},
// {132313.9849,-190217.1756,109184.5358,-31591.3717,4706.7198,-303.2175,-3.8959,-0.048818},
// {-40614.263,46666.4046,-16255.9431,-575.9708,1710.3026,-431.6023,42.7739,-0.48627},
// {11532.9196,-5590.9238,-6534.4392,6683.69,-2432.6611,433.7715,-38.2869,0.06012},
// {-22195.0812,23964.9711,-6300.1423,-2143.0048,1640.1092,-393.764,42.5826,-1.4546},
// {30323.2979,-28342.1464,2746.0341,5853.1043,-2859.9216,564.2388,-51.5441,0.056678},
// {-25463.9588,23452.1888,-1262.0169,-6015.3562,2972.3017,-631.1788,63.2485,-2.1673},
// {-52059.6558,37590.6345,11728.79,-19912.7208,7927.9601,-1435.6029,105.7052,3.4688},
// {-4906.0514,45142.4747,-60760.7684,35363.2813,-10793.3514,1767.2389,-131.6651,11.7414},
// {-23211.9312,25508.3834,-7597.8965,-1305.2348,1251.461,-279.6925,23.6752,0.53263},
// {8780.3773,-4699.5119,-4577.8966,5056.8991,-1922.9594,354.3315,-29.2216,2.3748},
//Q=[0.5 4 7 0 3 0 ]
//R=[3 1]
//T=0.004
//RadiusOfWheel=0.076

{255692.6044,-379248.2798,228278.4191,-71360.7459,12200.923,-1034.6789,-3.9701,-3.5999},
{-206832.8231,305365.2221,-181902.8753,55342.1116,-8692.0219,496.7603,42.7754,0.55746},
{132252.9971,-190150.6932,109165.2772,-31595.1651,4710.1077,-303.9742,-3.8217,-0.051684},
{-41053.5402,47352.6913,-16698.7401,-423.5739,1680.2327,-428.2425,42.5686,-0.4842},
{11700.5051,-5890.636,-6310.5219,6593.3504,-2411.4228,430.8336,-38.0497,0.048556},
{-23087.7969,25494.9639,-7395.0158,-1721.2432,1546.651,-382.1569,41.8995,-1.46},
{30789.0695,-29187.2528,3385.1755,5593.1477,-2798.8511,555.9821,-50.9333,0.034682},
{-26978.7814,26073.9667,-3156.8837,-5278.0936,2807.2075,-610.4023,61.9933,-2.1766},
{-51185.4668,36083.5954,12809.2675,-20326.7361,8018.2012,-1446.6349,106.5141,3.3883},
{-3718.9777,43168.0009,-59411.6675,34883.1282,-10702.8567,1760.4006,-132.1139,11.6466},
{-23131.2988,25383.5539,-7518.9324,-1331.2269,1256.073,-280.0879,23.6913,0.52828},
{8998.4612,-5101.0028,-4272.5254,4933.943,-1895.3301,351.0997,-29.0985,2.367},
//Q=[0.5 4 7 0 0.4 0 ]
//R=[3 1]
//T=0.004
//RadiusOfWheel=0.076




};
#endif
/*这个凑合还行
{-69.9539,81.5995,-39.8253,-0.58697},
{136.6819,-110.0697,22.7466,2.5835},
{3.244,-2.12,-1.8233,-0.088309},
{7.1556,-6.9964,2.1596,0.19998},
{-8.429,9.2403,-3.7128,-0.093171},
{1.4646,3.046,-3.953,1.4483},
{-8.3918,9.6,-4.2151,-0.16648},
{0.96411,4.0558,-4.7105,1.7285},
{0.74638,1.5579,-2.0201,0.73998},
{18.0282,-19.2429,7.4622,0.25481},
{-0.37749,0.74831,-0.53706,0.17763},
{4.5582,-4.726,1.7873,-0.028335},
//Q=[0.0001 0.0001 0.5 0.01 0.5 0.001 ]
//R=[1 0.25]
//T=0.004
//RadiusOfWheel=0.075
*/
// 没装机械臂的参数：
//  {-57.8424, 71.858, -43.1608, -1.1325},
//  {234.7896, -191.7027, 42.41, 4.2288},
//  {6.7116, -5.9119, -2.3464, -0.13416},
//  {18.7808, -18.3585, 6.0996, 0.31987},
//  {-17.3695, 20.298, -8.5919, -0.71461},
//  {5.5184, 16.1668, -18.6871, 6.3907},
//  {-9.1483, 12.6586, -6.913, -0.7776},
//  {4.9666, 12.2504, -14.9303, 5.4708},
//  {2.4078, 4.9881, -6.1731, 2.1448},
//  {60.0999, -67.0732, 26.9664, 2.4865},
//  {-1.1856, 1.8519, -1.1296, 0.33168},
//  {10.4459, -11.0145, 4.2118, -0.042454},
//  // Q=[0.001 0.001 5 1 5 0.01 ]
//  // R=[1 0.1]
//  // T=0.004
//  // RadiusOfWheel=0.075
